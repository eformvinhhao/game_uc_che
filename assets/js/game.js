const question = document.getElementById("question");
const choices = Array.from(document.getElementsByClassName("choice-text"));
const progressText = document.getElementById("progressText");
const diem_tongText = document.getElementById("diem_tong");
const so_cau_saiText = document.getElementById("so_cau_sai");
const thoi_gian_su_dungText = document.getElementById("thoi_gian_su_dung");
const progressBarFull = document.getElementById("progressBarFull");
let currentQuestion = {};
let acceptingAnswers = false;
let diem_tong = 0;
let so_cau_sai = 0;
let diem_tru_so_cau_sai = 0;
let thoi_gian_su_dung = 0;
let questionCounter = 0;
let availableQuesions = [];

let questions = [
  {
    "question": "TDS c·ªßa still l√† bao nhi√™u?",
    "choice1": "375",
    "choice2": "700",
    "choice3": "1900",
    "choice4": "80",
    "answer": 1
  },
  {
    "question": "TDS c·ªßa pet gas l√† bao nhi√™u?",
    "choice1": "375",
    "choice2": "700",
    "choice3": "1900",
    "choice4": "80",
    "answer": 3
  },
  {
    "question": "TDS c·ªßa vivant l√† bao nhi√™u?",
    "choice1": "375",
    "choice2": "700",
    "choice3": "1900",
    "choice4": "80",
    "answer": 4
  },
  {
    "question": "Vƒ©nh H·∫£o ƒëang ƒë∆∞·ª£c ch·ª©ng nh·∫≠n GCN n√†o v·ªÅ h·ªá th·ªëng qu·∫£n l√Ω ATVSTP",
    "choice1": "BRC",
    "choice2": "FSSC 22000",
    "choice3": "ISO 22000",
    "choice4": "ISO 14000",
    "answer": 2
  },
  {
    "question": "H·ªá th·ªëng l√†m m·ªÅm ƒë∆∞·ª£c t√°i sinh b·∫±ng?",
    "choice1": "N∆∞·ªõc mu·ªëi",
    "choice2": "NaOH",
    "choice3": "Clorine",
    "choice4": "N∆∞·ªõc n√≥ng",
    "answer": 1
  },
  {
    "question": "Ho√†n nguy√™n than s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p n√†o?",
    "choice1": "N∆∞·ªõc mu·ªëi",
    "choice2": "NaOH",
    "choice3": "Clorine",
    "choice4": "N∆∞·ªõc n√≥ng",
    "answer": 4
  },
  {
    "question": "Ozone ƒë∆∞·ª£c s·ª≠ d·ª•ng cho lo·∫°i n∆∞·ªõc n√†o?",
    "choice1": "220",
    "choice2": "20",
    "choice3": "375",
    "choice4": "1900",
    "answer": 3
  },
  {
    "question": "L·ª±c torque c√≤n ƒë∆∞·ª£c g·ªçi l√† ch·ªâ ti√™u n√†o d∆∞·ªõi ƒë√¢y?",
    "choice1": "L·ª±c ƒë√≥ng n·∫Øp",
    "choice2": "ƒê·ªô k√≠n",
    "choice3": "L·ª±c m·ªü n·∫Øp",
    "choice4": "ƒê·ªô x√¨",
    "answer": 3
  },
  {
    "question": "Ch·ªâ ti√™u SST c√≤n g·ªçi l√† g√¨?",
    "choice1": "ƒê·ªô ng·ªçt",
    "choice2": "L·ª±c ƒë√≥ng n·∫Øp",
    "choice3": "ƒê·ªô k√≠n n·∫Øp",
    "choice4": "L·ª±c m·ªü n·∫Øp",
    "answer": 3
  },
  {
    "question": "Ti√™u chu·∫©n SST c·ªßa s·∫£n ph·∫©m kh√¥ng gas l√† bao nhi√™u?",
    "choice1": "Kh√¥ng x√¨ ·ªü 50 psi, kh√¥ng bung ·ªü 100 psi",
    "choice2": "Kh√¥ng x√¨, kh√¥ng bung ·ªü c·∫£ 50 v√† 100 psi",
    "choice3": "X√¨ ·ªü 50 psi nh∆∞ng kh√¥ng bung ·ªü 100 psi",
    "choice4": "Kh√¥ng x√¨ ·ªü 100 psi, kh√¥ng bung ·ªü 150 psi",
    "answer": 1
  },
  {
    "question": "Ti√™u chu·∫©n SST c·ªßa s·∫£n ph·∫©m c√≥ gas l√† bao nhi√™u?",
    "choice1": "Kh√¥ng x√¨ ·ªü 50 psi, kh√¥ng bung ·ªü 100 psi",
    "choice2": "Kh√¥ng x√¨, kh√¥ng bung ·ªü c·∫£ 100 v√† 150 psi",
    "choice3": "X√¨ ·ªü 50 psi nh∆∞ng kh√¥ng bung ·ªü 100 psi",
    "choice4": "Kh√¥ng x√¨ ·ªü 100 psi, kh√¥ng bung ·ªü 150 psi",
    "answer": 4
  },
  {
    "question": "Ch·ªâ ti√™u AA c√≤n g·ªçi l√† g√¨?",
    "choice1": "G√≥c m·ªü n·∫Øp",
    "choice2": "G√≥c d·∫≠p n·∫Øp",
    "choice3": "G√≥c ƒë√≥ng n·∫Øp",
    "choice4": "C·∫£ 3 ƒë·ªÅu sai",
    "answer": 4
  },
  {
    "question": "Khi tƒÉng th·∫£i RO, ƒëi·ªÅu n√†o sau ƒë√¢y s·∫Ω x·∫£y ra?",
    "choice1": "TDS th√†nh ph·∫©m tƒÉng",
    "choice2": "TDS th√†nh ph·∫©m gi·∫£m",
    "choice3": "TDS th√†nh ph·∫©m kh√¥ng ƒë·ªïi",
    "choice4": "Ngh·∫πt m√†ng, d·ª´ng ho·∫°t ƒë·ªông",
    "answer": 2
  },
  {
    "question": "Khi tƒÉng t·ª∑ l·ªá nh√°nh by-pass ·ªü RO 375, ƒëi·ªÅu n√†o sau ƒë√¢y s·∫Ω x·∫£y ra?",
    "choice1": "Nitrate tƒÉng, Flo tƒÉng",
    "choice2": "Nitrate gi·∫£m, Flo gi·∫£m",
    "choice3": "Nitrate gi·∫£m, Flo tƒÉng",
    "choice4": "Nitrate tƒÉng, Flo gi·∫£m",
    "answer": 3
  },
  {
    "question": "Trong thi·∫øt k·∫ø, b·ªë tr√≠ khu v·ª±c s·∫£n xu·∫•t, ch·∫ø bi·∫øn c·ªßa nh√† m√°y quy ƒë·ªãnh m√†u s·∫Øc cho t·ª´ng v√πng s·∫°ch t·ª´ cao ƒë·∫øn th·∫•p nh∆∞ sau:",
    "choice1": " ƒê·ªè ü°∫ Xanh ü°∫ V√†ng",
    "choice2": "V√†ng ü°∫ ƒê·ªè ü°∫ Xanh",
    "choice3": " ƒê·ªè ü°∫ V√†ng ü°∫ Xanh",
    "choice4": " Xanh ü°∫ ƒê·ªè ü°∫ V√†ng",
    "answer": 3
  },
  {
    "question": "V√πng ‚Äúƒê·ªè‚Äù ƒë∆∞·ª£c quy ƒë·ªãnh trong t√†i li·ªáu GHP c·ªßa C√¥ng ty, bao g·ªìm c√°c khu v·ª±c sau:",
    "choice1": "Khu chi·∫øt r√≥t line 1, line 2,line3, line 4, line 5; v√† ch·∫ø bi·∫øn c≈©",
    "choice2": "Khu v·ª±c chi·∫øt r√≥t line 3; Khu ch·ª©a, c√¢n ph·ª• gia ch·∫ø bi·∫øn c≈©; Khu ch·ª©a, c√¢n ph·ª• gia ch·∫ø bi·∫øn m·ªõi.",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 1
  },
  {
    "question": "V√πng ‚ÄúV√†ng‚Äù quy ƒë·ªãnh trong t√†i li·ªáu GHP c·ªßa C√¥ng ty, bao g·ªìm c√°c khu v·ª±c sau:",
    "choice1": "Khu chi·∫øt r√≥t line 1, line 2, line 4; Khu v·ª±c ƒë√≥ng n·∫Øp v√† ch·∫ø bi·∫øn c≈©",
    "choice2": "Khu v·ª±c chi·∫øt r√≥t line 3; Khu ch·ª©a, c√¢n ph·ª• gia ch·∫ø bi·∫øn c≈©; Khu ch·ª©a, c√¢n ph·ª• gia CB m·ªõi.",
    "choice3": " Khu chi·∫øt r√≥t line 1, line 2, line 4",
    "choice4": " Khu ch·ª©a, c√¢n ph·ª• gia ch·∫ø bi·∫øn c≈©; Khu ch·ª©a, c√¢n ph·ª• gia ch·∫ø bi·∫øn m·ªõi.",
    "answer": 4
  },
  {
    "question": "V√πng v√†ng v√† v√πng ƒë·ªè quy ƒë·ªãnh trong t√†i li·ªáu GHP c·ªßa C√¥ng ty, ph·∫£i s·ª≠ d·ª•ng c√°c b·∫£o h·ªô lao ƒë·ªông sau:",
    "choice1": "Qu·∫ßn √°o b·∫£o h·ªô lao ƒë·ªông khu s·∫°ch, ·ªßng cao su, gi√†y khu s·∫°ch",
    "choice2": "¬†·ª¶ng cao su ho·∫∑c gi√†y khu s·∫°ch",
    "choice3": "¬†M≈© tr√πm, kh·∫©u trang s·∫°ch; ·ªßng cao su, gi√†y khu s·∫°ch",
    "choice4": "¬†M≈© tr√πm, kh·∫©u trang s·∫°ch; qu·∫ßn √°o b·∫£o h·ªô lao ƒë·ªông khu s·∫°ch, ·ªßng cao su, gi√†y khu s·∫°ch",
    "answer": 4
  },
  {
    "question": "H·ªá th·ªëng chi·∫øu s√°ng y√™u c·∫ßu:",
    "choice1": "B·∫£o ƒë·∫£m cung c·∫•p ƒë·ªß √°nh s√°ng cho ng∆∞·ªùi s·∫£n xu·∫•t, ch·∫ø bi·∫øn nh√¨n ƒë∆∞·ª£c b√¨nh th∆∞·ªùng.",
    "choice2": "B√≥ng ƒë√®n chi·∫øu s√°ng ph·∫£i ƒë∆∞·ª£c che ch·∫Øn an to√†n (h·ªôp ho·∫∑c l∆∞·ªõi) ƒë·ªÉ tr√°nh v·ª° v√† n·∫øu v·ª° s·∫Ω kh√¥ng c√≥ m·∫£nh v·ª° r∆°i v√†o th·ª±c ph·∫©m.",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 3
  },
  {
    "question": "Khu v·ª±c nh√† v·ªá sinh c√≥ quy ƒë·ªãnh sau:",
    "choice1": "T·ªëi thi·ªÉu 25 ng∆∞·ªùi ph·∫£i c√≥ 01 nh√† v·ªá sinh; ƒê∆∞·ª£c b·ªë tr√≠ ·ªü c√°c v·ªã tr√≠ thu·∫≠n ti·ªán cho t·∫•t c·∫£ kh√°ch h√†ng v√† m·ªçi ng∆∞·ªùi trong c∆° s·ªü s·ª≠ d·ª•ng",
    "choice2": "B·∫£o ƒë·∫£m c√°ch bi·ªát khu v·ª±c ch·∫ø bi·∫øn, nh√† ƒÉn v√† c√≥ ƒë·∫ßy ƒë·ªß thi·∫øt b·ªã b·∫£o ƒë·∫£m v·ªá sinh, c√≥ ƒë·ªß n∆∞·ªõc s·∫°ch v√† thi·∫øt b·ªã r·ª≠a tay sau khi ƒëi v·ªá sinh",
    "choice3": "¬†C·∫ßn c√≥ ch·ªâ d·∫´n ‚ÄúR·ª≠a tay sau khi ƒëi v·ªá sinh‚Äù tho√°t n∆∞·ªõc d·ªÖ d√†ng lo·∫°i b·ªè ch·∫•t th·∫£i; h∆∞·ªõng gi√≥ ch√≠nh kh√¥ng th·ªïi t·ª´ khu v·ª±c nh√† v·ªá sinh sang khu v·ª±c ch·∫ø bi·∫øn, b·∫£o qu·∫£n",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Y√™u c·∫ßu v·ªÅ thi·∫øt b·ªã, d·ª•ng c·ª• s·∫£n xu·∫•t, ch·∫ø bi·∫øn, l√†:",
    "choice1": "C√≥ ƒë·ªß d·ª•ng c·ª•, ƒë·ªì ch·ª©a ri√™ng cho nguy√™n li·ªáu, ƒë√≥ng g√≥i, v·∫≠n chuy·ªÉn th·ª±c ph·∫©m",
    "choice2": "D·ªÖ l√†m v·ªá sinh, b·∫£o d∆∞·ª°ng, kh√¥ng l√†m nhi·ªÖm b·∫©n th·ª±c ph·∫©m do d·∫ßu m·ª° b√¥i tr∆°n, tr√°nh m·∫£nh v·ª•n kim lo·∫°i.",
    "choice3": "Ph∆∞∆°ng ti·ªán, trang thi·∫øt b·ªã c·ªßa d√¢y chuy·ªÅn s·∫£n xu·∫•t, ch·∫ø bi·∫øn ph·∫£i c√≥ quy tr√¨nh v·ªá sinh, quy tr√¨nh v·∫≠n h√†nh",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Ch·ªß c∆° s·ªü, ng∆∞·ªùi tr·ª±c ti·∫øp tham gia s·∫£n xu·∫•t, CB th·ª±c ph·∫©m ph·∫£i ƒë√°p ·ª©ng ƒë·ªß ƒëi·ªÅu ki·ªán v·ªÅ:",
    "choice1": "Ki·∫øn th·ª©c, s·ª©c kh·ªèe v√† th·ª±c h√†nh an to√†n v·ªá sinh th·ª±c ph·∫©m",
    "choice2": "Ki·∫øn th·ª©c, s·ª©c kh·ªèe v√† c√≥ ‚ÄúGi·∫•y ch·ª©ng nh·∫≠n ki·∫øn th·ª©c v·ªÅ an to√†n v·ªá sinh th·ª±c ph·∫©m",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 2
  },
  {
    "question": "¬†Nh·ªØng ng∆∞·ªùi tham gia tr·ª±c ti·∫øp v√†o s·∫£n xu·∫•t, ch·∫ø bi·∫øn th·ª±c ph·∫©m ph·∫£i th·ª±c hi·ªán c√°c y√™u c·∫ßu sau, ƒë·ªÉ b·∫£o ƒë·∫£m an to√†n th·ª±c ph·∫©m:",
    "choice1": "¬†M·∫∑c trang ph·ª•c b·∫£o h·ªô ri√™ng, m·∫∑c t·∫°p d·ªÅ, ƒëeo kh·∫©u trang, ƒë·ªôi m≈© che t√≥c khi s·∫£n xu·∫•t, ch·∫ø bi·∫øn.",
    "choice2": "Gi·ªØ m√≥ng tay ng·∫Øn, s·∫°ch s·∫Ω v√† kh√¥ng ƒëeo ƒë·ªì trang s·ª©c khi ti·∫øp x√∫c tr·ª±c ti·∫øp v·ªõi th·ª±c ph·∫©m ƒÉn ngay; Kh√¥ng ƒëeo ƒë·ªì trang s·ª©c, ƒë·ªìng h·ªì khi s·∫£n xu·∫•t, ch·∫ø bi·∫øn v√† ti·∫øp x√∫c tr·ª±c ti·∫øp v·ªõi th·ª±c ph·∫©m.",
    "choice3": "Kh√¥ng ƒÉn u·ªëng, h√∫t thu·ªëc, kh·∫°c nh·ªï trong khu v·ª±c s·∫£n xu·∫•t th·ª±c ph·∫©m",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Th·ª±c h√†nh ch·∫ø bi·∫øn th·ª±c ph·∫©m t·ªët, b·∫£o ƒë·∫£m an to√†n th·ª±c ph·∫©m, khi s·ª≠ d·ª•ng nguy√™n li·ªáu, y√™u c·∫ßu:",
    "choice1": "C√≥ ngu·ªìn g·ªëc r√µ r√†ng (t·ªët nh·∫•t l√† ƒë√£ ƒë∆∞·ª£c ch·ª©ng nh·∫≠n an to√†n cho ph√©p s·ª≠ d·ª•ng)",
    "choice2": "Kh√¥ng s·ª≠ d·ª•ng ph·ª• gia th·ª±c ph·∫©m, ch·∫•t h·ªó tr·ª£ ch·∫ø bi·∫øn kh√¥ng ƒë∆∞·ª£c B·ªô Y t·∫ø cho ph√©p s·ª≠ d·ª•ng v√†",
    "choice3": "¬†L∆∞u gi·ªØ h·ªì s∆° v·ªÅ ngu·ªìn g·ªëc, xu·∫•t x·ª© nguy√™n li·ªáu th·ª±c ph·∫©m v√† c√°c t√†i li·ªáu kh√°c v·ªÅ to√†n b·ªô qu√° tr√¨nh s·∫£n xu·∫•t, ch·∫ø bi·∫øn th·ª±c ph·∫©m.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Th·ª±c h√†nh ch·∫ø bi·∫øn th·ª±c ph·∫©m t·ªët, b·∫£o ƒë·∫£m an to√†n th·ª±c ph·∫©m, ph·∫£i:",
    "choice1": "Th∆∞·ªùng xuy√™n v·ªá sinh d·ª•ng c·ª•, v·ªá sinh khu v·ª±c s·∫£n xu·∫•t, ch·∫ø bi·∫øn, nh√† ƒÉn, thu d·ªçn r√°c th·∫£i...",
    "choice2": "Kh√¥ng cho v·∫≠t nu√¥i v√†o khu v·ª±c s·∫£n xu·∫•t, ch·∫ø bi·∫øn th·ª±c ph·∫©m.",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 3
  },
  {
    "question": "B√†n tay t·ªët khi r·ª≠a tay ƒë·ªÉ b·∫£o ƒë·∫£m s·∫°ch s·∫Ω, th√¨ ph·∫£i:",
    "choice1": "R·ª≠a tay k·ªπ b·∫±ng x√† ph√≤ng v√† n∆∞·ªõc s·∫°ch",
    "choice2": "L√†m kh√¥ tay sau khi r·ª≠a b·∫±ng khƒÉn gi·∫•y d√πng m·ªôt l·∫ßn, khƒÉn b√¥ng s·∫°ch ho·∫∑c m√°y th·ªïi kh√¥",
    "choice3": "Kh√¥ng ch√πi v√†o qu·∫ßn √°o, v√°y, t·∫°p d·ªÅ",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Y√™u c·∫ßu v·ªõi ph∆∞∆°ng ti·ªán r·ª≠a v√† kh·ª≠ tr√πng tay, l√†:",
    "choice1": "C√≥ ƒë·∫ßy ƒë·ªß c√°c thi·∫øt b·ªã r·ª≠a tay v√† kh·ª≠ tr√πng tay ·ªü c√°c v·ªã tr√≠ thu·∫≠n ti·ªán trong khu v·ª±c s·∫£n xu·∫•t, ch·∫ø bi·∫øn, nh√† ƒÉn cho m·ªçi ng∆∞·ªùi trong c∆° s·ªü s·ª≠ d·ª•ng.",
    "choice2": "N∆°i r·ª≠a tay ph·∫£i cung c·∫•p ƒë·∫ßy ƒë·ªß n∆∞·ªõc s·∫°ch, x√† ph√≤ng, khƒÉn lau tay s·ª≠ d·ª•ng m·ªôt l·∫ßn hay m√°y s·∫•y kh√¥ tay.",
    "choice3": "S·ªë l∆∞·ª£ng 50 c√¥ng nh√¢n th√¨ ph·∫£i c√≥ √≠t nh·∫•t 1 b·ªìn r·ª≠a tay.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Ph√≤ng ch·ªëng c√¥n tr√πng, ƒë·ªông v·∫≠t g√¢y h·∫°i, y√™u c·∫ßu:",
    "choice1": "Thi·∫øt b·ªã ph√≤ng ch·ªëng c√¥n tr√πng, ƒë·ªông v·∫≠t g√¢y h·∫°i ph·∫£i ƒë∆∞·ª£c l√†m b·∫±ng v·∫≠t li·ªáu kh√¥ng g·ªâ, d·ªÖ th√°o, h·ª£p v·ªá sinh, B·∫£o ƒë·∫£m ph√≤ng ch·ªëng hi·ªáu qu·∫£ c√¥n tr√πng v√† ƒë·ªông v·∫≠t g√¢y h·∫°i.",
    "choice2": "Kh√¥ng s·ª≠ d·ª•ng thu·ªëc, ƒë·ªông v·∫≠t ƒë·ªÉ di·ªát chu·ªôt, c√¥n tr√πng v√† ƒë·ªông v·∫≠t g√¢y h·∫°i trong khu v·ª±c s·∫£n xu·∫•t, ch·∫ø bi·∫øn th·ª±c ph·∫©m.",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 3
  },
  {
    "question": "¬†Y√™u c·∫ßu v·ªÅ thi·∫øt b·ªã thu gom r√°c th·∫£i, l√†:",
    "choice1": "C√≥ d·ª•ng c·ª• thu gom, ch·ª©a r√°c th·∫£i, ch·∫•t th·∫£i b·∫£o ƒë·∫£m v·ªá sinh.",
    "choice2": "Thi·∫øt b·ªã, d·ª•ng c·ª• thu gom r√°c th·∫£i ph·∫£i ƒë∆∞·ª£c l√†m b·∫±ng v·∫≠t li·ªáu √≠t b·ªã h∆∞ h·ªèng, b·∫£o ƒë·∫£m k√≠n, c√≥ n·∫Øp ƒë·∫≠y, tr√°nh s·ª± x√¢m nh·∫≠p c·ªßa ƒë·ªông v·∫≠t v√† ƒë∆∞·ª£c v·ªá sinh th∆∞·ªùng xuy√™n.",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 4
  },
  {
    "question": "¬†Y√™u c·∫ßu v·ªÅ thi·∫øt b·ªã, d·ª•ng c·ª• gi√°m s√°t, ƒëo l∆∞·ªùng l√†:",
    "choice1": "C√≥ ƒë·ªß thi·∫øt b·ªã, d·ª•ng c·ª• gi√°m s√°t, ƒëo l∆∞·ªùng ƒë·ªÉ ƒë√°nh gi√° ƒë∆∞·ª£c c√°c ch·ªâ ti√™u ch·∫•t l∆∞·ª£ng th·ª±c ph·∫©m",
    "choice2": "Thi·∫øt b·ªã, d·ª•ng c·ª• gi√°m s√°t, ki·ªÉm so√°t ƒë∆∞·ª£c ƒë·ªô ch√≠nh x√°c.",
    "choice3": "ƒê∆∞·ª£c b·∫£o d∆∞·ª°ng, ƒë·ªãnh k·ª≥ theo quy ƒë·ªãnh.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Y√™u c·∫ßu v·ªÅ ch·∫•t t·∫©y r·ª≠a v√† s√°t tr√πng, l√†:",
    "choice1": "C√°c ch·∫•t d√πng ƒë·ªÉ t·∫©y r·ª≠a v√† s√°t tr√πng d·ª•ng c·ª• ch·ª©a th·ª±c ph·∫©m ph·∫£i ƒë∆∞·ª£c ƒë·ª±ng trong bao b√¨ d·ªÖ nh·∫≠n bi·∫øt v√† c√≥ h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng ph√π h·ª£p v·ªõi ƒë·∫∑c ƒëi·ªÉm k·ªπ thu·∫≠t.",
    "choice2": "C√°c ch·∫•t t·∫©y r·ª≠a ph·∫£i ƒë·ªÉ c√°ch bi·ªát v·ªõi n∆°i s·∫£n xu·∫•t, ch·∫ø bi·∫øn, b·∫£o qu·∫£n th·ª±c ph·∫©m.",
    "choice3": "Ch·ªâ s·ª≠ d·ª•ng ch·∫•t t·∫©y r·ª≠a d·ª•ng c·ª• ch·ª©a th·ª±c ph·∫©m v√† ch·∫•t t·∫©y tr√πng ƒë∆∞·ª£c B·ªô Y t·∫ø cho ph√©p.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "¬†H√†nh vi n√†o sau ƒë√¢y l√† h√†nh vi b·ªã c·∫•m theo quy ƒë·ªãnh c·ªßa Lu·∫≠t ATTP?",
    "choice1": "S·ª≠ d·ª•ng nguy√™n li·ªáu kh√¥ng thu·ªôc lo·∫°i d√πng cho th·ª±c ph·∫©m ƒë·ªÉ ch·∫ø bi·∫øn th·ª±c ph·∫©m",
    "choice2": "Ng∆∞·ªùi m·∫Øc b·ªánh truy·ªÅn nhi·ªÖm tham gia s·∫£n xu·∫•t, kinh doanh th·ª±c ph·∫©m.",
    "choice3": "S·∫£n xu·∫•t, kinh doanh th·ª±c ph·∫©m t·∫°i c∆° s·ªü kh√¥ng c√≥ gi·∫•y ch·ª©ng nh·∫≠n c∆° s·ªü ƒë·ªß ƒëi·ªÅu ki·ªán an to√†n th·ª±c ph·∫©m theo quy ƒë·ªãnh c·ªßa ph√°p lu·∫≠t.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "H√†nh vi n√†o sau ƒë√¢y l√† h√†nh vi b·ªã c·∫•m theo quy ƒë·ªãnh c·ªßa Lu·∫≠t ATTP?",
    "choice1": "Ch·ª©a ƒë·ª±ng th·ª±c ph·∫©m tr√™n thi·∫øt b·ªã, d·ª•ng c·ª•, v·∫≠t li·ªáu kh√¥ng b·∫£o ƒë·∫£m v·ªá sinh; ng∆∞·ªùi tr·ª±c ti·∫øp ch·∫ø bi·∫øn th·ª©c ƒÉn m√† kh√¥ng ƒë·ªôi m≈©, ƒëeo kh·∫©u trang; kh√¥ng c·∫Øt ng·∫Øn m√≥ng tay; kh√¥ng s·ª≠ d·ª•ng gƒÉng tay khi ti·∫øp x√∫c tr·ª±c ti·∫øp v·ªõi th·ª±c ph·∫©m ch√≠n, th·ª©c ƒÉn ngay.",
    "choice2": "Kh√¥ng c√≥ ƒë·ªß d·ª•ng c·ª• ch·∫ø bi·∫øn, b·∫£o qu·∫£n v√† s·ª≠ d·ª•ng ri√™ng ƒë·ªëi v·ªõi th·ª±c ph·∫©m t∆∞∆°i s·ªëng, th·ª±c ph·∫©m ƒë√£ qua ch·∫ø bi·∫øn.",
    "choice3": "N∆°i ch·∫ø bi·∫øn, kinh doanh, b·∫£o qu·∫£n c√≥ c√¥n tr√πng, ƒë·ªông v·∫≠t g√¢y h·∫°i x√¢m nh·∫≠p.",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "¬†Trong khi ch·∫ø bi·∫øn th·ª±c ph·∫©m, ng∆∞·ªùi ch·∫ø bi·∫øn th·ª±c ph·∫©m t·∫°i c√°c c∆° s·ªü kinh doanh d·ªãch v·ª• ƒÉn u·ªëng kh√¥ng ƒë∆∞·ª£c?",
    "choice1": "Kh·∫°c nh·ªï",
    "choice2": "ƒÇn k·∫πo cao su",
    "choice3": "Mang ƒë·ªìng h·ªì, trang s·ª©c",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 4
  },
  {
    "question": "Khi b·ªã ng·ªô ƒë·ªôc th·ª±c ph·∫©m, th√¨ n∆°i c√≥ ng∆∞·ªùi ng·ªô ƒë·ªôc th·ª±c ph·∫©m b√°o cho c∆° quan n√†o?",
    "choice1": "C∆° s·ªü y t·∫ø g·∫ßn nh·∫•t",
    "choice2": "H·ªôi ti√™u chu·∫©n v√† b·∫£o v·ªá quy·ªÅn l·ª£i ng∆∞·ªùi ti√™u d√πng.",
    "choice3": "Chi c·ª•c Qu·∫£n l√Ω th·ªã tr∆∞·ªùng.",
    "choice4": "Chi c·ª•c an to√†n th·ª±c ph·∫©m.",
    "answer": 1
  },
  {
    "question": "Ba ƒëi·ªÅu ki·ªán v·ªÅ v·ªá sinh an to√†n th·ª±c ph·∫©m bao g·ªìm",
    "choice1": "ƒêi·ªÅu ki·ªán v·ªÅ c∆° s·ªü; ƒêi·ªÅu ki·ªán v·ªÅ trang thi·∫øt b·ªã, d·ª•ng c·ª• v√† ƒëi·ªÅu ki·ªán v·ªÅ con ng∆∞·ªùi",
    "choice2": "ƒêi·ªÅu ki·ªán li√™n quan ƒë·∫øn m·ªëi nguy v·ªÅ vi sinh; h√≥a h·ªçc v√† v·∫≠t l√Ω",
    "choice3": "ƒêi·ªÅu ki·ªán v·ªÅ v·ªá sinh c√° nh√¢n; b·∫£o h·ªô lao ƒë·ªông v√† kh√¥ng ƒëeo trang s·ª©c",
    "choice4": "T·∫•t c·∫£ c√°c c√¢u tr√™n ƒë·ªÅu ƒë√∫ng",
    "answer": 1
  },
  {
    "question": "V·ªÅ ƒë·ªãa ƒëi·ªÉm v√† m√¥i tr∆∞·ªùng c√≥ y√™u c·∫ßu",
    "choice1": "Kh√¥ng b·ªã ng·∫≠p n∆∞·ªõc, ƒë·ªçng n∆∞·ªõc.",
    "choice2": "C√°ch bi·ªát v·ªõi ngu·ªìn √¥ nhi·ªÖm (c·ªëng r√£nh, r√°c th·∫£i, c√¥ng tr√¨nh v·ªá sinh, ‚Ä¶)",
    "choice3": "C·∫£ 2 ƒë·ªÅu ƒë√∫ng",
    "choice4": "C·∫£ 2 ƒë·ªÅu sai",
    "answer": 3
  }
];

//CONSTANTS
const INCORRECT_TAX = 100;
const MAX_QUESTIONS = 100;

// Start Game & Timer
startGame = () => {
  questionCounter = 0;
  diem_tong = 100;
  availableQuesions = [...questions];
  getNewQuestion();
  // Timer
  setInterval(function () {
    thoi_gian_su_dung --;
    diem_tong --;
    diem_tongText.innerText = diem_tong;
    thoi_gian_su_dungText.innerText = thoi_gian_su_dung;
    so_cau_saiText.innerText = so_cau_sai;
    if (diem_tong === 0 || so_cau_sai === 1) {
      localStorage.setItem("diem_tong", diem_tong);
      localStorage.setItem("so_cau_sai", so_cau_sai);
      localStorage.setItem("thoi_gian_su_dung", thoi_gian_su_dung)

      //go to the end page
      return window.location.assign("../../assets/html/end.html");
    }
  }, 1000);
};

// Display Next Random Question and Answers
getNewQuestion = () => {
  if (availableQuesions.length === 0 || questionCounter >= MAX_QUESTIONS) {
    localStorage.setItem("diem_tong", diem_tong);
    localStorage.setItem("so_cau_sai", so_cau_sai);
    localStorage.setItem("thoi_gian_su_dung", thoi_gian_su_dung)

    //go to the end page
    return window.location.assign("../html/end.html");
  }
  questionCounter++;
  progressText.innerText = `Question ${questionCounter}/${MAX_QUESTIONS}`;

  //Update the progress bar
  progressBarFull.style.width = `${(questionCounter / MAX_QUESTIONS) * 100}%`;

  const questionIndex = Math.floor(Math.random() * availableQuesions.length);
  currentQuestion = availableQuesions[questionIndex];
  question.innerText = currentQuestion.question;

  // Get Answers
  choices.forEach(choice => {
    const number = choice.dataset["number"];
    choice.innerText = currentQuestion["choice" + number];
  });

  availableQuesions.splice(questionIndex, 1);
  acceptingAnswers = true;
};

//Get User's Choice
choices.forEach(choice => {
  choice.addEventListener("click", e => {
    if (!acceptingAnswers) return;

    acceptingAnswers = false;
    const selectedChoice = e.target;
    const selectedAnswer = selectedChoice.dataset["number"];

    const classToApply =
      selectedAnswer == currentQuestion.answer ? "correct" : "incorrect";

    if (classToApply === "incorrect") {
      decrementScore(INCORRECT_TAX);
    }

    selectedChoice.parentElement.classList.add(classToApply);

    setTimeout(() => {
      selectedChoice.parentElement.classList.remove(classToApply);
      getNewQuestion();
    }, 1000);
  });
});

//Penalty for wrong choice
decrementScore = num => {
  diem_tong -= num;
  diem_tongText.innerText = diem_tong;
  thoi_gian_su_dungText.innerText = thoi_gian_su_dung;
  so_cau_sai++;
  diem_tru_so_cau_sai = diem_tru_so_cau_sai + 10;
  so_cau_saiText.innerText = so_cau_sai;
};


startGame();
